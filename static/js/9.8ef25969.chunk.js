(this.webpackJsonpartisto=this.webpackJsonpartisto||[]).push([[9],{112:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return M}));var n=r(55),s=r.n(n),c=r(56),a=r(30),o=r(3),i=r(8),l=r(60),u=r(57),d=r(73),p=r(63),m=r(18),j=r(4);function f(e){var t=e.username,r=e.fullName,n=e.photo,s=e.setFollowingOrFollowers;return Object(j.jsxs)("div",{className:"p-2 flex mx-auto items-center",children:[Object(j.jsx)(m.b,{to:"/p/".concat(t),onClick:function(){return s()},children:Object(j.jsx)("div",{children:Object(j.jsx)("img",{src:n,className:"h-10 w-10 rounded-full object-cover"})})}),Object(j.jsxs)("div",{className:"pl-4",children:[Object(j.jsx)(m.b,{to:"/p/".concat(t),onClick:function(){return s()},children:Object(j.jsx)("p",{className:"font-bold",children:r})}),Object(j.jsxs)("p",{className:"text-sm",children:[Object(j.jsx)("span",{className:"text-xs",children:"ID: "}),t]})]})]})}var h=r(64),b=r.n(h);function x(e){var t=e.following,r=e.followers,n=e.followingOrFollowers,i=e.setFollowingOrFollowers,l=Object(o.useState)([]),d=Object(a.a)(l,2),p=d[0],m=d[1];return Object(o.useEffect)((function(){var e=function(){var e=Object(c.a)(s.a.mark((function e(){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.c)(t);case 2:r=e.sent,m(r);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a=function(){var e=Object(c.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.c)(r);case 2:t=e.sent,m(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();"following"===n&&e(),"followers"===n&&a()}),[n]),Object(j.jsx)("div",{className:"bg-gray-light h-full sm:max-w-sm sm:w-96 w-screen rounded text-gray-dark p-8 overflow-scroll relative",children:p?p.map((function(e,t){return Object(j.jsx)(f,{username:e.username,fullName:e.fullName,photo:e.photo,setFollowingOrFollowers:i},t)})):Object(j.jsx)(b.a,{count:4,className:"w-full pb-4 h-1/4"})})}function O(e){var t=e.profileUserInfo,r=e.photoCounts,n=Object(p.a)().userInfo,l=n.username,d=n.docId,m=n.userId,f=Object(o.useState)(null),h=Object(a.a)(f,2),b=h[0],O=h[1],g=Object(o.useState)(t.followers.length),w=Object(a.a)(g,2),v=w[0],k=w[1],y=Object(o.useState)(null),N=Object(a.a)(y,2),C=N[0],I=N[1],L=Object(i.g)();Object(o.useEffect)((function(){t&&l&&function(){var e=Object(c.a)(s.a.mark((function e(){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.a)(l,t.userId);case 2:r=e.sent,O(!!r),k(t.followers.length);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[t,l]);var S=function(){var e=Object(c.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O((function(e){return!e})),k(b?function(e){return e-1}:function(e){return e+1}),e.next=4,Object(u.i)(d,m,t.docId,t.userId,b);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(j.jsxs)("div",{className:"pt-24 text-gray-light",children:[C&&Object(j.jsx)("div",{onClick:function(e){!function(e){e.target===e.currentTarget&&I(null)}(e)},className:"flex justify-center w-screen h-screen pt-20 bg-gray-primary bg-opacity-50 fixed top-0 left-0 bottom-0 right-0 z-90",children:Object(j.jsxs)("div",{className:"relative h-3/4",children:[Object(j.jsx)("button",{onClick:function(){return I(null)},className:"absolute top-2 right-2 md:-right-10 md:text-gray-light text-gray-dark z-90",children:Object(j.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 md:h-10 md:w-10",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})}),Object(j.jsx)(x,{following:t.following,followers:t.followers,followingOrFollowers:C,setFollowingOrFollowers:I})]})}),Object(j.jsxs)("div",{className:"flex items-top sm:items-center ",children:[Object(j.jsx)("div",{className:"pr-2 sm:pr-4",children:Object(j.jsx)("img",{src:t.photo,alt:"".concat(t.username," profile photo"),className:"sm:w-36 sm:h-36 w-12 h-12 rounded-full object-cover"})}),Object(j.jsxs)("div",{className:"",children:[Object(j.jsxs)("div",{className:"flex items-center",children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("p",{className:"text-sm font-bold sm:text-lg",children:t.fullName}),Object(j.jsxs)("p",{className:"text-xs sm:text-base",children:[Object(j.jsx)("span",{className:"sm:text-sm",children:"ID: "}),t.username]})]}),Object(j.jsxs)("div",{className:"ml-4 sm:ml-10",children:[t.username===l?Object(j.jsx)("button",{className:"text-xs bg-gray-dark text-gray-light p-2 rounded",onClick:function(){return L.push("/edit/".concat(l))},children:"Edit Profile"}):null,t.username===l||null===b?null:Object(j.jsx)("button",{onClick:S,className:"rounded text-gray-light bg-red-primary text-xs p-2 sm:hidden ".concat(b?"bg-red-primary":"bg-blue-primary"),children:b?"Unfollow":"Follow"})]})]}),Object(j.jsxs)("p",{className:"text-sm sm:text-base",children:[Object(j.jsx)("span",{className:"text-xs sm:text-sm",children:"Category: "}),t.category]}),Object(j.jsxs)("div",{className:"flex mt-2 sm:mt-4",children:[Object(j.jsxs)("p",{className:"text-sm sm:text-base",children:[r," ",Object(j.jsx)("span",{className:"text-xs sm:text-sm",children:1===r?"post":"posts"})]}),Object(j.jsxs)("p",{className:"px-4 cursor-pointer text-sm sm:text-base",onClick:function(){return I(t.followers.length>0&&"followers")},children:[v," ",Object(j.jsx)("span",{className:"text-xs sm:text-sm",children:1===t.followers.length?"follower":"followers"})]}),Object(j.jsxs)("p",{className:"cursor-pointer text-sm sm:text-base",onClick:function(){return I(t.following.length>0&&"following")},children:[t.following.length," ",Object(j.jsx)("span",{className:"text-xs sm:text-sm",children:"following"})]})]})]}),Object(j.jsx)("div",{children:t.username===l||null===b?null:Object(j.jsx)("button",{onClick:S,className:"rounded text-gray-light bg-red-primary text-sm py-2 px-6 hidden sm:block ".concat(b?"bg-red-primary":"bg-blue-primary"),children:b?"Unfollow":"Follow"})})]}),Object(j.jsxs)("div",{className:"pt-2 max-w-2xl",children:[Object(j.jsx)("p",{className:"text-sm sm:text-base",children:t.title}),Object(j.jsx)("p",{className:"text-xs sm:text-sm",children:"Bio:"}),Object(j.jsx)("p",{className:"break-words text-xs sm:text-sm",children:t.bio})]})]})}var g=r(68),w=r(69),v=r(31),k=r(20);function y(e){var t=e.allComments,r=e.setAllComments,n=e.docId,s=e.addNewComment,c=e.photo,i=Object(o.useState)(""),l=Object(a.a)(i,2),u=l[0],p=l[1],m=Object(o.useContext)(v.a).user,f=m.displayName,h=m.uid,b=Object(o.useContext)(k.a),x=b.firebase,O=b.FieldValue;return Object(j.jsx)("div",{className:"mt-2",children:Object(j.jsxs)("form",{className:"flex",onSubmit:function(e){return e.preventDefault(e),r([{comment:u,userId:h,displayName:f}].concat(Object(d.a)(t))),s(c,u,h,f),p(""),x.firestore().collection("photos").doc(n).update({comments:O.arrayUnion({comment:u,userId:h,displayName:f})})},children:[Object(j.jsx)("input",{type:"text",placeholder:"add a comment...",autoComplete:"off",className:"text-base w-full p-2 rounded-l",value:u,onChange:function(e){var t=e.target;return p(t.value)}}),Object(j.jsx)("button",{type:"submit",className:"p-2 bg-blue-primary text-gray-light rounded-r sm:text-base text-sm ".concat(u.length<1&&"opacity-50"),children:"SEND"})]})})}function N(e){var t=e.allComments,r=e.setAllComments,n=e.docId,s=e.addNewComment,c=e.photo,i=Object(o.useState)(!1),l=Object(a.a)(i,2),u=l[0],d=l[1],p=Object(o.useContext)(v.a).user;return Object(j.jsxs)("div",{className:"pt-2",children:[Object(j.jsx)("div",{children:t.slice(0,3).map((function(e,t){return Object(j.jsxs)("p",{className:"text-sm text-gray-dark break-words",children:[Object(j.jsx)(m.b,{to:"/p/".concat(p.displayName),children:Object(j.jsxs)("span",{className:"font-bold",children:[e.displayName," "]})}),"   ",e.comment]},t)}))}),t.length>3&&!u?Object(j.jsx)("p",{className:"text-xs text-gray-primary opacity-70 pt-2 cursor-pointer",onClick:function(){return d(!0)},children:"View All Comments"}):u?t.slice(3).map((function(e,t){return Object(j.jsxs)("p",{className:"text-sm text-gray-dark break-words",children:[Object(j.jsx)(m.b,{to:"/p/".concat(p.displayName),children:Object(j.jsxs)("span",{className:"font-bold",children:[e.displayName," "]})}),"   ",e.comment]},t)})):null,Object(j.jsx)(y,{allComments:t,setAllComments:r,docId:n,addNewComment:s,photo:c})]})}function C(e){var t=e.likes,r=e.userLikedPhoto,n=e.comments,i=e.docId,l=e.isUserLikedToggle,u=e.addNewComment,d=e.photo,p=Object(o.useState)(t.length),m=Object(a.a)(p,2),f=m[0],h=m[1],b=Object(o.useState)(n),x=Object(a.a)(b,2),O=x[0],g=x[1],w=Object(o.useState)(r),y=Object(a.a)(w,2),C=y[0],I=y[1];Object(o.useEffect)((function(){i&&(h(t.length),g(n),I(r))}),[i]),console.log("photo",d),console.log("comments",n);var L=Object(o.useContext)(v.a).user.uid,S=void 0===L?"":L,F=Object(o.useContext)(k.a),U=F.firebase,M=F.FieldValue,T=function(){var e=Object(c.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I(!C),l(d,S),e.next=4,U.firestore().collection("photos").doc(i).update({likes:C?M.arrayRemove(S):M.arrayUnion(S)});case 4:h(t.length);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(j.jsxs)("div",{className:"",children:[Object(j.jsxs)("div",{className:"flex",children:[Object(j.jsxs)("div",{className:"flex items-end",children:[Object(j.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"sm:h-8 sm:w-8 h-6 w-6 text-gray-dark cursor-pointer ".concat(C&&"fill-red"," "),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",onClick:T,children:Object(j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),Object(j.jsx)("p",{className:"text-sm text-gray-dark",children:f})]}),Object(j.jsxs)("div",{className:"flex items-end pl-4",children:[Object(j.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 sm:h-8 sm:w-8 text-gray-dark cursor-pointer",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),Object(j.jsx)("p",{className:"text-sm text-gray-dark",children:O.length})]})]}),Object(j.jsx)(N,{setAllComments:g,allComments:O,docId:i,addNewComment:u,photo:d})]})}function I(e){var t=e.photo,r=e.isUserLikedToggle,n=e.addNewComment;return t.username?Object(j.jsxs)("div",{className:"bg-gray-light py-8 px-2 sm:px-8 mx-auto overflow-scroll rounded-sm",children:[Object(j.jsx)(g.a,{userId:t.userId,username:t.username,caption:t.caption,date:t.dateCreated}),Object(j.jsx)(w.a,{imageSrc:t.imageSrc}),Object(j.jsx)(C,{likes:t.likes,userLikedPhoto:t.userLikedPhoto,comments:t.comments,docId:t.docId,isUserLikedToggle:r,addNewComment:n,photo:t})]}):Object(j.jsx)(h.SkeletonTheme,{color:"#494848",highlightColor:"#F1F1F1",children:Object(j.jsx)(b.a,{count:1,width:600,height:600})})}function L(e){var t=e.photo,r=e.profileUserInfo,n=e.photos,s=e.isUserLikedToggle,c=e.addNewComment,i=Object(o.useState)(!1),l=Object(a.a)(i,2),u=l[0],d=l[1],p=Object(o.useState)(t),m=Object(a.a)(p,2),f=m[0],h=m[1],b=function(){d((function(e){return!e})),h(t)};return t?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"relative w-full",style:{paddingTop:"100%"},children:Object(j.jsx)("img",{src:t.imageSrc,alt:t.caption,className:"object-cover cursor-pointer absolute top-0 left-0 right-0 bottom-0 w-full h-full",onClick:b})}),u&&Object(j.jsxs)("div",{onClick:function(e){!function(e){e.target===e.currentTarget&&b()}(e)},className:"flex justify-center w-screen py-10 bg-gray-primary bg-opacity-70 fixed top-0 left-0 right-0 bottom-0 z-90",children:[Object(j.jsx)("button",{onClick:function(){n.indexOf(f)>0&&h((function(e){return n[n.indexOf(e)-1]}))},className:"hidden md:flex text-gray-light absolute md:left-4 lg:left-20 xl:left-40 top-1/2 p-4 rounded opacity-60 hover:opacity-100 ".concat(0===n.indexOf(f)&&"md:hidden"),children:Object(j.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})})}),Object(j.jsx)("button",{onClick:function(){n.length-1!==n.indexOf(f)&&h((function(e){return n[n.indexOf(e)+1]}))},className:"hidden md:flex text-gray-light absolute md:right-4 lg:right-20 xl:right-40 top-1/2 p-4 rounded opacity-60 hover:opacity-100 ".concat(n.length-1===n.indexOf(f)&&"md:hidden"),children:Object(j.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})}),Object(j.jsxs)("div",{className:"flex h-screen pb-4 sm:pb-0 sm:h-auto sm:max-h-screen relative max-w-screen-sm",children:[Object(j.jsx)("button",{onClick:b,className:" absolute top-0 right-0 text-gray-primary md:-right-10 md:text-gray-light",children:Object(j.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 md:h-10 md:w-10",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})}),Object(j.jsx)(I,{photo:f,profileUsername:r.username,isUserLikedToggle:s,addNewComment:c})]})]})]}):null}function S(e){var t=e.profileUserInfo,r=e.photos,n=e.photoCounts,s=e.isUserLikedToggle,c=e.addNewComment;return Object(j.jsx)("div",{className:"border-t-2 border-gray-dark my-8 pt-8",children:Object(j.jsx)("div",{className:"grid grid-cols-3 gap-2 sm:gap-8 items-center",children:r.map((function(e,a){return Object(j.jsx)(L,{photo:e,profileUserInfo:t,photos:r,photoCounts:n,isUserLikedToggle:s,addNewComment:c},a)}))})})}function F(e){var t=e.profileUserInfo,r=Object(o.useState)(null),n=Object(a.a)(r,2),i=n[0],l=n[1],m=Object(o.useState)(0),f=Object(a.a)(m,2),h=f[0],b=f[1];console.log("photos",i);var x=Object(p.a)().userInfo.userId;Object(o.useEffect)((function(){var e=function(){var e=Object(c.a)(s.a.mark((function e(){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.e)(x,t.userId,t.username);case 2:r=e.sent,l(r.sort((function(e,t){return t.dateCreated-e.dateCreated}))),b(r.length);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(null===t||void 0===t?void 0:t.userId)&&x&&e()}),[null===t||void 0===t?void 0:t.userId,x]);return Object(j.jsxs)("div",{className:"max-w-screen-lg container mx-auto px-4",children:[Object(j.jsx)(O,{profileUserInfo:t,photos:i,photoCounts:h}),i?i.length>0?Object(j.jsx)(S,{profileUserInfo:t,photos:i,photoCounts:h,isUserLikedToggle:function(e,t){var r=i;r[i.indexOf(e)].userLikedPhoto=!i[i.indexOf(e)].userLikedPhoto;var n=r[i.indexOf(e)].likes.indexOf(t);n>-1?r[i.indexOf(e)].likes.splice(n,1):r[i.indexOf(e)].likes.push(t),l(r)},addNewComment:function(e,t,r,n){var s=i,c=i[i.indexOf(e)].comments;s[i.indexOf(e)].comments=[{comment:t,userId:r,displayName:n}].concat(Object(d.a)(c)),l(s)}}):Object(j.jsx)("div",{className:"mt-8 border-t-2 border-gray-dark",children:Object(j.jsx)("p",{className:"text-gray-light text-center pt-8",children:"No Posts"})}):null]})}var U=r(11);function M(){var e=Object(i.i)().username,t=Object(o.useState)(null),r=Object(a.a)(t,2),n=r[0],d=r[1],p=Object(i.g)();return Object(o.useEffect)((function(){e&&function(){var t=Object(c.a)(s.a.mark((function t(){var r,n,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(u.h)(e);case 2:r=t.sent,n=Object(a.a)(r,1),c=n[0],d(c),c||p.push(U.e);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[e]),Object(o.useEffect)((function(){document.title="".concat(e," - Artisto")}),[e]),(null===n||void 0===n?void 0:n.username)?Object(j.jsxs)("div",{children:[Object(j.jsx)(l.a,{}),Object(j.jsx)(F,{profileUserInfo:n})]}):Object(j.jsx)(h.SkeletonTheme,{color:"#494848",highlightColor:"#F1F1F1",children:Object(j.jsx)("div",{className:"max-w-screen-lg h-screen mx-auto",children:Object(j.jsx)(b.a,{count:1,height:200,className:"mt-20 mx-4"})})})}},57:function(e,t,r){"use strict";r.d(t,"b",(function(){return j})),r.d(t,"g",(function(){return h})),r.d(t,"h",(function(){return x})),r.d(t,"a",(function(){return g})),r.d(t,"d",(function(){return v})),r.d(t,"e",(function(){return y})),r.d(t,"i",(function(){return F})),r.d(t,"c",(function(){return M})),r.d(t,"f",(function(){return B})),r.d(t,"j",(function(){return W})),r.d(t,"k",(function(){return z}));var n=r(30),s=r(17),c=r(55),a=r.n(c),o=r(56),i=r(23),l=r(61),u=r.n(l),d=r(62),p="".concat("dvhwserkv"),m="".concat("s4onxndn");function j(e){return f.apply(this,arguments)}function f(){return(f=Object(o.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.b.firestore().collection("users").where("username","==",t).get();case 2:return r=e.sent,e.abrupt("return",r.docs.length>0);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return b.apply(this,arguments)}function b(){return(b=Object(o.a)(a.a.mark((function e(t){var r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.b.firestore().collection("users").where("userId","==",t).get();case 2:return r=e.sent,n=r.docs.map((function(e){return Object(s.a)(Object(s.a)({},e.data()),{},{docId:e.id})})),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){return O.apply(this,arguments)}function O(){return(O=Object(o.a)(a.a.mark((function e(t){var r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.b.firestore().collection("users").where("username","==",t).get();case 2:return r=e.sent,n=r.docs.map((function(e){return Object(s.a)(Object(s.a)({},e.data()),{},{docId:e.id})})),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e,t){return w.apply(this,arguments)}function w(){return(w=Object(o.a)(a.a.mark((function e(t,r){var c,o,l,u,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.b.firestore().collection("users").where("username","==",t).where("following","array-contains",r).get();case 2:return c=e.sent,o=c.docs.map((function(e){return Object(s.a)(Object(s.a)({},e.data()),{},{docId:e.id})})),l=Object(n.a)(o,1),u=l[0],d=void 0===u?{}:u,e.abrupt("return",d.userId);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e,t){return k.apply(this,arguments)}function k(){return(k=Object(o.a)(a.a.mark((function e(t,r){var c,l,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.b.firestore().collection("photos").where("userId","in",t).get();case 2:return c=e.sent,l=c.docs.map((function(e){return Object(s.a)(Object(s.a)({},e.data()),{},{docId:e.id})})),e.next=6,Promise.all(l.map(function(){var e=Object(o.a)(a.a.mark((function e(t){var c,o,i,l,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=!1,t.likes.includes(r)&&(c=!0),e.next=4,h(t.userId);case 4:return o=e.sent,i=Object(n.a)(o,1),l=i[0],u=l.username,e.abrupt("return",Object(s.a)(Object(s.a)({username:u},t),{},{userLikedPhoto:c}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:return u=e.sent,e.abrupt("return",u);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e,t,r){return N.apply(this,arguments)}function N(){return(N=Object(o.a)(a.a.mark((function e(t,r,n){var c,l,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.b.firestore().collection("photos").where("userId","==",r).get();case 2:return c=e.sent,l=c.docs.map((function(e){return Object(s.a)(Object(s.a)({},e.data()),{},{docId:e.id})})),e.next=6,Promise.all(l.map(function(){var e=Object(o.a)(a.a.mark((function e(r){var c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=!1,r.likes.includes(t)&&(c=!0),e.abrupt("return",Object(s.a)(Object(s.a)({username:n},r),{},{userLikedPhoto:c}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:return u=e.sent,e.abrupt("return",u);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e,t,r){return I.apply(this,arguments)}function I(){return(I=Object(o.a)(a.a.mark((function e(t,r,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i.b.firestore().collection("users").doc(t).update({following:n?i.a.arrayRemove(r):i.a.arrayUnion(r)});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e,t,r){return S.apply(this,arguments)}function S(){return(S=Object(o.a)(a.a.mark((function e(t,r,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i.b.firestore().collection("users").doc(t).update({followers:n?i.a.arrayRemove(r):i.a.arrayUnion(r)});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e,t,r,n,s){return U.apply(this,arguments)}function U(){return(U=Object(o.a)(a.a.mark((function e(t,r,n,s,c){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(t,s,c);case 2:return e.next=4,L(n,r,c);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e){return T.apply(this,arguments)}function T(){return(T=Object(o.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(function(){var e=Object(o.a)(a.a.mark((function e(t){var r,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(t);case 2:return r=e.sent,s=Object(n.a)(r,1),c=s[0],e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e,t){return P.apply(this,arguments)}function P(){return(P=Object(o.a)(a.a.mark((function e(t,r){var n,c,o,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=8;break}return e.next=3,i.b.firestore().collection("users").where("category","==",t).get();case 3:return n=e.sent,c=n.docs.map((function(e){return Object(s.a)(Object(s.a)({},e.data()),{},{docId:e.id})})),e.abrupt("return",c);case 8:return e.next=10,i.b.firestore().collection("users").limit(10).where("category","==",t).get();case 10:return o=e.sent,l=o.docs.map((function(e){return Object(s.a)(Object(s.a)({},e.data()),{},{docId:e.id})})),e.abrupt("return",l);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e,t,r,n,s,c,a){return E.apply(this,arguments)}function E(){return(E=Object(o.a)(a.a.mark((function e(t,r,n,s,c,o,l){var j,f,h,b;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l(!0),!o){e.next=24;break}return j="",f={maxSizeMB:1,maxWidthOrHeight:400},e.prev=4,e.next=7,Object(d.a)(o[0],f);case 7:return h=e.sent,(b=new FormData).append("file",h),b.append("upload_preset",m),e.next=13,u.a.post("https://api.cloudinary.com/v1_1/".concat(p,"/image/upload"),b).then((function(e){var t=e.data;j=t.secure_url}));case 13:return e.next=15,i.b.firestore().collection("users").doc(t).update({fullName:r,category:n,title:s,bio:c,photo:j});case 15:l(!1),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(4),l(!1),alert(e.t0.message);case 22:e.next=27;break;case 24:return e.next=26,i.b.firestore().collection("users").doc(t).update({fullName:r,category:n,title:s,bio:c});case 26:l(!1);case 27:case"end":return e.stop()}}),e,null,[[4,18]])})))).apply(this,arguments)}function z(e,t,r,n){return D.apply(this,arguments)}function D(){return(D=Object(o.a)(a.a.mark((function e(t,r,n,s){var c,o,l,j;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="",o={maxWidthOrHeight:2e3},s(!0),e.prev=3,e.next=6,Object(d.a)(r[0],o);case 6:return l=e.sent,(j=new FormData).append("file",l),j.append("upload_preset",m),e.next=12,u.a.post("https://api.cloudinary.com/v1_1/".concat(p,"/image/upload"),j).then((function(e){var t=e.data;c=t.secure_url}));case 12:return e.next=14,i.b.firestore().collection("photos").add({caption:t,comments:[],dateCreated:Date.now(),imageSrc:c,likes:[],photoId:n+Date.now(),userId:n,userLatitude:34.0522,userLongitude:-188.2437});case 14:s(!1),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(3),s(!1),alert(e.t0.message);case 21:case"end":return e.stop()}}),e,null,[[3,17]])})))).apply(this,arguments)}},58:function(e,t,r){"use strict";t.a=r.p+"static/media/logo.6dc95425.png"},60:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var n=r(55),s=r.n(n),c=r(56),a=r(30),o=r(3),i=r(58),l=r(8),u=r(18),d=r(11),p=r(31),m=r(20),j=r(57),f=r(4);function h(){var e=Object(o.useState)(""),t=Object(a.a)(e,2),r=t[0],n=t[1],h=Object(o.useContext)(p.a).user.uid,b=Object(o.useContext)(m.a).firebase,x=Object(l.g)();return Object(o.useEffect)((function(){var e=null;h&&function(){var t=Object(c.a)(s.a.mark((function t(){var r,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=9;break}return t.next=3,Object(j.g)(h);case 3:r=t.sent,c=Object(a.a)(r,1),e=c[0],n(e),t.next=0;break;case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[h]),r?Object(f.jsx)("div",{className:"bg-gray-dark w-screen h-14 flex justify-center items-center fixed z-50 top-0 left-0",children:Object(f.jsxs)("div",{className:"max-w-screen-xl w-full h-14 flex justify-between items-center",children:[Object(f.jsx)(u.b,{to:d.a,children:Object(f.jsx)("h1",{className:"flex sm:h-14 sm:w-auto w-28",children:Object(f.jsx)("img",{src:i.a,alt:"artisto",className:"sm:h-full sm:w-auto w-full h-auto"})})}),Object(f.jsxs)("div",{className:"flex flex-row items-center",children:[Object(f.jsx)("div",{className:"pr-2 sm:pr-4",children:Object(f.jsx)(u.b,{to:d.j,children:Object(f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 sm:h-8 sm:w-8 text-gray-light",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(f.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})})}),Object(f.jsx)("div",{className:"pr-2 sm:pr-4",children:Object(f.jsx)(u.b,{to:d.h,children:Object(f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 sm:h-8 sm:w-8 text-gray-light",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(f.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})}),Object(f.jsx)("div",{className:"pr-2 sm:pr-4",children:Object(f.jsx)(u.b,{to:d.c,children:Object(f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 sm:h-8 sm:w-8 text-gray-light",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(f.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})})}),Object(f.jsx)("div",{className:"flex h-14 items-center pr-2 sm:pr-4",children:Object(f.jsx)(u.b,{to:"/p/".concat(null===r||void 0===r?void 0:r.username),children:Object(f.jsx)("img",{src:null===r||void 0===r?void 0:r.photo,className:"h-5 w-5 sm:h-10 sm:w-10 rounded-full object-cover"})})}),Object(f.jsx)("div",{className:"pr-2 sm:pr-4 cursor-pointer",onClick:function(){b.auth().signOut(),x.push(d.b)},children:Object(f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 sm:h-8 sm:w-8 text-gray-light",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(f.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]})]})}):null}},63:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r(55),s=r.n(n),c=r(56),a=r(30),o=r(3),i=r(31),l=r(57);function u(){var e=Object(o.useContext)(i.a).user,t=Object(o.useState)({}),r=Object(a.a)(t,2),n=r[0],u=r[1];return Object(o.useEffect)((function(){function t(){return(t=Object(c.a)(s.a.mark((function t(){var r,n,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(l.g)(e.uid);case 2:r=t.sent,n=Object(a.a)(r,1),c=n[0],u(c);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}(null===e||void 0===e?void 0:e.uid)&&function(){t.apply(this,arguments)}()}),[e]),{userInfo:n}}},68:function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var n=r(55),s=r.n(n),c=r(56),a=r(30),o=r(3),i=r(18),l=r(111),u=r(57),d=r(4);function p(e){var t=e.username,r=e.userId,n=e.caption,p=e.date,m=Object(o.useState)(null),j=Object(a.a)(m,2),f=j[0],h=j[1];return Object(o.useEffect)((function(){r&&function(){var e=Object(c.a)(s.a.mark((function e(){var t,n,c,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.g)(r);case 2:t=e.sent,n=Object(a.a)(t,1),c=n[0],o=c.photo,h(o);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[r]),Object(d.jsxs)("div",{className:"",children:[Object(d.jsxs)("div",{className:"flex ",children:[Object(d.jsx)(i.b,{to:"/p/".concat(t),children:Object(d.jsx)("div",{className:"w-12 mr-2",children:Object(d.jsx)("img",{src:f,alt:"".concat(t," profile photo"),className:"w-12 h-12 rounded-full mr-4 object-cover"})})}),Object(d.jsxs)("div",{children:[Object(d.jsx)(i.b,{to:"/p/".concat(t),children:Object(d.jsx)("p",{className:"font-bold text-gray-dark",children:t})}),Object(d.jsx)("p",{className:"text-gray-dark break-words text-xs sm:text-sm",children:n})]})]}),Object(d.jsxs)("p",{className:"text-gray-primary text-xs pt-2 text-right",children:[Object(l.a)(p,new Date)," ago"]})]})}},69:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));r(3);var n=r(4);function s(e){var t=e.imageSrc;return Object(n.jsx)("div",{className:"flex w-full justify-center pt-2 pb-2",children:Object(n.jsx)("img",{src:t,className:"w-full"})})}}}]);
//# sourceMappingURL=9.8ef25969.chunk.js.map