(this.webpackJsonpartisto=this.webpackJsonpartisto||[]).push([[6],{109:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return v}));var n=r(56),c=r.n(n),s=r(57),a=r(30),o=r(3),i=r(31),u=r(61),l=r(63),d=r.n(l),j=(r(58),r(55)),p=r(66),f=r(67),b=r(69),h=r(6);function x(e){var t=e.photo;return Object(h.jsxs)("div",{className:"bg-gray-light py-8 px-16 mb-8",children:[Object(h.jsx)(p.a,{userId:t.userId,username:t.username,caption:t.caption,date:t.dateCreated}),Object(h.jsx)(f.a,{imageSrc:t.imageSrc}),Object(h.jsx)(b.a,{likes:t.likes,userLikedPhoto:t.userLikedPhoto,comments:t.comments,docId:t.docId})]})}function m(){Object(o.useContext)(i.a).user;var e=function(){var e=Object(o.useState)(null),t=Object(a.a)(e,2),r=t[0],n=t[1],u=Object(o.useContext)(i.a).user.uid,l=void 0===u?"":u;return Object(o.useEffect)((function(){function e(){return(e=Object(s.a)(c.a.mark((function e(){var t,r,s,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.g)(l);case 2:if(t=e.sent,r=Object(a.a)(t,1),s=r[0].following,o=[],!(s.length>0)){e.next=10;break}return e.next=9,Object(j.d)(s,l);case 9:o=e.sent;case 10:o.sort((function(e,t){return t.dateCreated-e.dateCreated})),n(o);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[l]),{photos:r}}().photos;return console.log("photos",e),Object(h.jsx)("div",{className:"col-span-2 container",children:e?e.length>0?e.map((function(e){return Object(h.jsx)(x,{photo:e},e.docId)})):Object(h.jsx)("p",{children:"Follow artists to see photos!"}):Object(h.jsx)(l.SkeletonTheme,{color:"#494848",highlightColor:"#F1F1F1",children:Object(h.jsx)(d.a,{count:4,width:640,height:500})})})}var O=r(68);function v(){var e=Object(o.useState)({}),t=Object(a.a)(e,2),r=(t[0],t[1]),n=Object(o.useContext)(i.a).user;return Object(o.useEffect)((function(){document.title="Artisto"}),[]),Object(o.useEffect)((function(){n&&function(){var e=Object(s.a)(c.a.mark((function e(){var t,s,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.g)(n.uid);case 2:t=e.sent,s=Object(a.a)(t,1),o=s[0],r(o),console.log("result",o);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[n]),Object(h.jsxs)("div",{className:"font-body",children:[Object(h.jsx)(u.a,{}),Object(h.jsx)("div",{className:"w-sceen flex justify-center pt-24",children:Object(h.jsxs)("div",{className:"grid grid-cols-3 w-full max-w-screen-lg mx-4",children:[Object(h.jsx)(m,{}),Object(h.jsx)(O.a,{})]})})]})}},55:function(e,t,r){"use strict";r.d(t,"b",(function(){return d})),r.d(t,"g",(function(){return p})),r.d(t,"h",(function(){return b})),r.d(t,"a",(function(){return x})),r.d(t,"d",(function(){return O})),r.d(t,"e",(function(){return g})),r.d(t,"i",(function(){return I})),r.d(t,"c",(function(){return S})),r.d(t,"f",(function(){return M})),r.d(t,"j",(function(){return B}));var n=r(30),c=r(17),s=r(56),a=r.n(s),o=r(57),i=r(23),u=r(62),l=r.n(u);function d(e){return j.apply(this,arguments)}function j(){return(j=Object(o.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.b.firestore().collection("users").where("username","==",t).get();case 2:return r=e.sent,console.log(r.docs.length>0),e.abrupt("return",r.docs.length>0);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return f.apply(this,arguments)}function f(){return(f=Object(o.a)(a.a.mark((function e(t){var r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.b.firestore().collection("users").where("userId","==",t).get();case 2:return r=e.sent,n=r.docs.map((function(e){return Object(c.a)(Object(c.a)({},e.data()),{},{docId:e.id})})),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){return h.apply(this,arguments)}function h(){return(h=Object(o.a)(a.a.mark((function e(t){var r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.b.firestore().collection("users").where("username","==",t).get();case 2:return r=e.sent,n=r.docs.map((function(e){return Object(c.a)(Object(c.a)({},e.data()),{},{docId:e.id})})),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e,t){return m.apply(this,arguments)}function m(){return(m=Object(o.a)(a.a.mark((function e(t,r){var s,o,u,l,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.b.firestore().collection("users").where("username","==",t).where("following","array-contains",r).get();case 2:return s=e.sent,o=s.docs.map((function(e){return Object(c.a)(Object(c.a)({},e.data()),{},{docId:e.id})})),u=Object(n.a)(o,1),l=u[0],d=void 0===l?{}:l,e.abrupt("return",d.userId);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e,t){return v.apply(this,arguments)}function v(){return(v=Object(o.a)(a.a.mark((function e(t,r){var s,u,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.b.firestore().collection("photos").where("userId","in",t).get();case 2:return s=e.sent,u=s.docs.map((function(e){return Object(c.a)(Object(c.a)({},e.data()),{},{docId:e.id})})),e.next=6,Promise.all(u.map(function(){var e=Object(o.a)(a.a.mark((function e(t){var s,o,i,u,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=!1,t.likes.includes(r)&&(s=!0),e.next=4,p(t.userId);case 4:return o=e.sent,i=Object(n.a)(o,1),u=i[0],l=u.username,e.abrupt("return",Object(c.a)(Object(c.a)({username:l},t),{},{userLikedPhoto:s}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:return l=e.sent,e.abrupt("return",l);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return w.apply(this,arguments)}function w(){return(w=Object(o.a)(a.a.mark((function e(t){var r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.b.firestore().collection("photos").where("userId","==",t).get();case 2:return r=e.sent,n=r.docs.map((function(e){return Object(c.a)(Object(c.a)({},e.data()),{},{docId:e.id})})),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e,t,r){return k.apply(this,arguments)}function k(){return(k=Object(o.a)(a.a.mark((function e(t,r,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i.b.firestore().collection("users").doc(t).update({following:n?i.a.arrayRemove(r):i.a.arrayUnion(r)});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e,t,r){return C.apply(this,arguments)}function C(){return(C=Object(o.a)(a.a.mark((function e(t,r,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i.b.firestore().collection("users").doc(t).update({followers:n?i.a.arrayRemove(r):i.a.arrayUnion(r)});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,t,r,n,c){return L.apply(this,arguments)}function L(){return(L=Object(o.a)(a.a.mark((function e(t,r,n,c,s){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(t,c,s);case 2:return e.next=4,N(n,r,s);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){return F.apply(this,arguments)}function F(){return(F=Object(o.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(function(){var e=Object(o.a)(a.a.mark((function e(t){var r,c,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(t);case 2:return r=e.sent,c=Object(n.a)(r,1),s=c[0],console.log("userList",s),e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return r=e.sent,console.log("result",r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e){return A.apply(this,arguments)}function A(){return(A=Object(o.a)(a.a.mark((function e(t){var r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.b.firestore().collection("users").where("category","==",t).get();case 2:return r=e.sent,n=r.docs.map((function(e){return Object(c.a)(Object(c.a)({},e.data()),{},{docId:e.id})})),console.log(n),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e,t,r,n,c,s){return E.apply(this,arguments)}function E(){return(E=Object(o.a)(a.a.mark((function e(t,r,n,c,s,o){var u,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=11;break}return u="",(d=new FormData).append("file",o[0]),d.append("upload_preset","s4onxndn"),d.append("cloud_name","test"),e.next=8,l.a.post("https://api.cloudinary.com/v1_1/dvhwserkv/image/upload",d).then((function(e){var t=e.data;u=t.secure_url,console.log("url",u)}));case 8:i.b.firestore().collection("users").doc(t).update({fullName:r,category:n,title:c,bio:s,photo:u}),e.next=12;break;case 11:i.b.firestore().collection("users").doc(t).update({fullName:r,category:n,title:c,bio:s});case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},58:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var n=r(56),c=r.n(n),s=r(57),a=r(30),o=r(3),i=r(31),u=r(55);function l(){var e=Object(o.useContext)(i.a).user,t=Object(o.useState)({}),r=Object(a.a)(t,2),n=r[0],l=r[1];return Object(o.useEffect)((function(){function t(){return(t=Object(s.a)(c.a.mark((function t(){var r,n,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(u.g)(e.uid);case 2:r=t.sent,n=Object(a.a)(r,1),s=n[0],l(s);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}(null===e||void 0===e?void 0:e.uid)&&function(){t.apply(this,arguments)}()}),[e]),{userInfo:n}}},59:function(e,t,r){"use strict";t.a=r.p+"static/media/logo.6dc95425.png"},61:function(e,t,r){"use strict";r.d(t,"a",(function(){return j}));var n=r(3),c=r(59),s=r(8),a=r(19),o=r(11),i=r(31),u=r(20),l=(r(55),r(58)),d=r(6);function j(){Object(n.useContext)(i.a).user;var e=Object(n.useContext)(u.a).firebase,t=Object(s.g)(),r=Object(l.a)().userInfo;return Object(d.jsx)("div",{className:"bg-gray-dark w-screen h-14 flex justify-center items-center fixed z-50",children:Object(d.jsxs)("div",{className:"max-w-screen-xl w-screen h-14 flex justify-between items-center",children:[Object(d.jsx)(a.b,{to:o.a,children:Object(d.jsx)("h1",{className:"h-14 flex",children:Object(d.jsx)("img",{src:c.a,alt:"artisto"})})}),Object(d.jsxs)("div",{className:"flex flex-row items-center",children:[Object(d.jsx)("div",{className:"pr-4",children:Object(d.jsx)(a.b,{to:o.g,children:Object(d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-gray-light",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})}),Object(d.jsx)("div",{className:"pr-4",children:Object(d.jsx)(a.b,{to:o.c,children:Object(d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-gray-light",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})})}),Object(d.jsx)("div",{className:"flex h-14 items-center pr-4",children:Object(d.jsx)(a.b,{to:"/p/".concat(r.username),children:Object(d.jsx)("img",{src:r.photo,className:"h-10 w-10 rounded-full"})})}),Object(d.jsx)("div",{className:"pr-4 cursor-pointer",onClick:function(){e.auth().signOut(),t.push(o.b)},children:Object(d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-gray-light",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]})]})})}},66:function(e,t,r){"use strict";r.d(t,"a",(function(){return j}));var n=r(56),c=r.n(n),s=r(57),a=r(30),o=r(3),i=r(19),u=r(107),l=r(55),d=r(6);function j(e){var t=e.username,r=e.userId,n=e.caption,j=e.date,p=Object(o.useState)(null),f=Object(a.a)(p,2),b=f[0],h=f[1];return Object(o.useEffect)((function(){r&&function(){var e=Object(s.a)(c.a.mark((function e(){var t,n,s,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.g)(r);case 2:t=e.sent,n=Object(a.a)(t,1),s=n[0],o=s.photo,h(o);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[r]),Object(d.jsxs)("div",{className:"",children:[Object(d.jsxs)("div",{className:"flex",children:[Object(d.jsx)(i.b,{to:"/p/".concat(t),children:Object(d.jsx)("img",{src:b,alt:"".concat(t," profile photo"),className:"w-12 h-12 rounded-full mr-4"})}),Object(d.jsxs)("div",{children:[Object(d.jsx)(i.b,{to:"/p/".concat(t),children:Object(d.jsx)("p",{className:"font-bold text-gray-dark",children:t})}),Object(d.jsx)("p",{className:"text-gray-dark break-words",children:n})]})]}),Object(d.jsxs)("p",{className:"text-gray-primary text-xs pt-2 text-right",children:[Object(u.a)(j,new Date)," ago"]})]})}},67:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));r(3);var n=r(6);function c(e){var t=e.imageSrc;return Object(n.jsx)("div",{className:"flex w-full justify-center pt-2 pb-2",children:Object(n.jsx)("img",{src:t,className:"w-full"})})}},68:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));r(3),r(31),r(55);var n=r(19),c=r(58),s=r(63),a=r.n(s),o=r(6);function i(){var e=Object(c.a)().userInfo;return Object(o.jsx)(s.SkeletonTheme,{color:"#494848",highlightColor:"#F1F1F1",children:Object(o.jsx)("div",{className:"flex pt-4 justify-center",children:Object(o.jsxs)("div",{className:"mx-auto justify-center flex-col w-full sticky top-0 max-h-screen pt-20",children:[Object(o.jsx)("div",{className:"flex justify-center",children:Object(o.jsx)(n.b,{to:"/p/".concat(e.username),children:e.photo?Object(o.jsx)("img",{src:e.photo,className:"w-36 rounded-full"}):Object(o.jsx)(a.a,{width:144,height:144,circle:!0})})}),e.fullName?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{className:"flex justify-center flex-col items-center",children:[Object(o.jsx)("p",{className:"font-bold mt-4 text-gray-light",children:e.fullName}),Object(o.jsxs)("p",{className:"text-sm text-gray-light",children:[Object(o.jsx)("span",{className:"text-xs",children:"ID: "}),e.username]}),Object(o.jsx)("p",{className:"text-sm mt-4 text-gray-light",children:e.title}),Object(o.jsxs)("p",{className:"mt-2 text-sm text-gray-light",children:[Object(o.jsx)("span",{className:"text-xs ",children:"Category: "}),e.category]})]}),Object(o.jsxs)("div",{className:"mt-2 px-20",children:[Object(o.jsx)("p",{className:"text-sm text-gray-light",children:"Bio:"}),Object(o.jsx)("p",{className:"text-xs w-full break-words text-gray-light",children:e.bio})]})]}):Object(o.jsx)("div",{className:"flex justify-center flex-col items-center mt-4",children:Object(o.jsx)(a.a,{width:180,height:200})})]})})})}},69:function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));var n=r(56),c=r.n(n),s=r(57),a=r(30),o=r(3),i=r(19),u=r(80),l=r(31),d=r(20),j=r(6);function p(e){var t=e.allComments,r=e.setAllComments,n=e.docId,c=Object(o.useState)(""),s=Object(a.a)(c,2),i=s[0],p=s[1],f=Object(o.useContext)(l.a).user,b=f.displayName,h=f.uid,x=Object(o.useContext)(d.a),m=x.firebase,O=x.FieldValue;return Object(j.jsx)("div",{className:"mt-2",children:Object(j.jsxs)("form",{className:"flex",onSubmit:function(e){return e.preventDefault(e),r([{comment:i,userId:h,displayName:b}].concat(Object(u.a)(t))),p(""),m.firestore().collection("photos").doc(n).update({comments:O.arrayUnion({comment:i,userId:h,displayName:b})})},children:[Object(j.jsx)("input",{type:"text",placeholder:"add a comment...",autoComplete:"off",className:"text-sm w-full p-2 rounded-l",value:i,onChange:function(e){var t=e.target;return p(t.value)}}),Object(j.jsx)("button",{type:"submit",className:"p-2 bg-blue-primary text-gray-light rounded-r ".concat(i.length<1&&"opacity-50"),children:"SEND"})]})})}function f(e){var t=e.allComments,r=e.setAllComments,n=e.docId,c=Object(o.useState)(!1),s=Object(a.a)(c,2),u=s[0],d=s[1],f=Object(o.useContext)(l.a).user;return Object(j.jsxs)("div",{className:"pt-2",children:[Object(j.jsx)("div",{children:t.slice(0,3).map((function(e,t){return Object(j.jsxs)("p",{className:"text-sm text-gray-dark break-words",children:[Object(j.jsx)(i.b,{to:"/p/".concat(f.displayName),children:Object(j.jsxs)("span",{className:"font-bold",children:[e.displayName," "]})}),"   ",e.comment]},t)}))}),t.length>3&&!u?Object(j.jsx)("p",{className:"text-xs text-gray-primary opacity-70 pt-2 cursor-pointer",onClick:function(){return d(!0)},children:"View All Comments"}):u?t.slice(3).map((function(e,t){return Object(j.jsxs)("p",{className:"text-sm text-gray-dark break-words",children:[Object(j.jsx)(i.b,{to:"/p/".concat(f.displayName),children:Object(j.jsxs)("span",{className:"font-bold",children:[e.displayName," "]})}),"   ",e.comment]},t)})):null,Object(j.jsx)(p,{allComments:t,setAllComments:r,docId:n})]})}function b(e){var t=e.likes,r=e.userLikedPhoto,n=e.comments,i=e.docId,u=Object(o.useState)(t.length),p=Object(a.a)(u,2),b=p[0],h=p[1],x=Object(o.useState)(n),m=Object(a.a)(x,2),O=m[0],v=m[1],g=Object(o.useState)(r),w=Object(a.a)(g,2),y=w[0],k=w[1],N=Object(o.useContext)(l.a).user.uid,C=void 0===N?"":N,I=Object(o.useContext)(d.a),L=I.firebase,S=I.FieldValue,F=function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(!y),e.next=3,L.firestore().collection("photos").doc(i).update({likes:y?S.arrayRemove(C):S.arrayUnion(C)});case 3:h((function(e){return y?e-1:e+1}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(j.jsxs)("div",{className:"",children:[Object(j.jsxs)("div",{className:"flex",children:[Object(j.jsxs)("div",{className:"flex items-end",children:[Object(j.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-gray-dark cursor-pointer ".concat(y&&"fill-red"," "),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",onClick:F,children:Object(j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),Object(j.jsx)("p",{className:"text-sm text-gray-dark",children:b})]}),Object(j.jsxs)("div",{className:"flex items-end pl-4",children:[Object(j.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-gray-dark cursor-pointer",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),Object(j.jsx)("p",{className:"text-sm text-gray-dark",children:O.length})]})]}),Object(j.jsx)(f,{setAllComments:v,allComments:O,docId:i})]})}}}]);
//# sourceMappingURL=6.ef94f05e.chunk.js.map