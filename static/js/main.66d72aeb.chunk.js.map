{"version":3,"sources":["constants/routes.js","context/firebase.js","lib/firebase.js","context/user.js","helpers/ProtectedRoute.js","helpers/isUserLoggedIn.js","components/ScrollToTop.js","App.js","hooks/useAuthListener.js","index.js"],"names":["DASHBOARD","LOGIN","SIGN_UP","PROFILE","PROFILE_EDIT","SEARCH","MESSAGES","UPLOAD_IMAGE","WELCOME","NOT_FOUND","FirebaseContext","createContext","firebase","Firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","FieldValue","firestore","UserContext","ProtectedRoute","user","children","rest","render","location","to","pathname","ROUTES","state","from","IsUserLoggedIn","loggedInPath","console","log","withRouter","history","useEffect","unlisten","listen","window","scrollTo","Login","lazy","SignUp","DashBoard","Profile","ProfileEdit","Search","Messages","UploadImage","Welcome","NotFound","App","useState","JSON","parse","localStorage","getItem","setUser","useContext","listener","auth","onAuthStateChanged","authUser","setItem","stringify","removeItem","useAuthListener","Provider","value","fallback","className","path","component","exact","ReactDOM","document","getElementById"],"mappings":"mGAAA,oVAAO,IAAMA,EAAY,IACZC,EAAQ,SACRC,EAAU,WACVC,EAAU,eACVC,EAAe,kBACfC,EAAS,UACTC,EAAW,YACXC,EAAe,UACfC,EAAU,WACVC,EAAY,c,gCCTzB,WAEMC,EAAkBC,wBAAc,MACvBD,O,gCCHf,gFAcME,GAdN,YAciBC,IAASC,cATX,CACXC,OAAQ,0CACRC,WAAY,8BACZC,UAAW,cACXC,cAAe,0BACfC,kBAAmB,eACnBC,MAAO,+CAIHC,EAAeR,IAASS,UAAxBD,Y,gCCfR,WAEME,EAAcZ,wBAAc,MACnBY,O,0KCCA,SAASC,EAAT,GAAsD,IAA5BC,EAA2B,EAA3BA,KAAMC,EAAqB,EAArBA,SAAaC,EAAQ,mCAEhE,OACI,cAAC,IAAD,2BACQA,GADR,IAEIC,OAAQ,YAAmB,IAAhBC,EAAe,EAAfA,SACP,OAAIJ,EACOC,EAEND,EAUE,KARC,cAAC,IAAD,CACIK,GAAI,CACAC,SAAUC,IACVC,MAAO,CAAEC,KAAML,UCfhC,SAASM,EAAT,GAAoE,IAA1CV,EAAyC,EAAzCA,KAAMW,EAAmC,EAAnCA,aAAcV,EAAqB,EAArBA,SAAaC,EAAQ,kDAG9E,OADAU,QAAQC,IAAI,OAAQX,GAEhB,cAAC,IAAD,2BACQA,GADR,IAEIC,OAAQ,YAAmB,IAAhBC,EAAe,EAAfA,SACP,OAAKJ,EAGDA,EAEI,cAAC,IAAD,CACIK,GAAI,CACAC,SAAUK,EACVH,MAAO,CAAEC,KAAML,MAKxB,KAZIH,MCKZa,mBAbf,YAAmC,IAAZC,EAAW,EAAXA,QAUnB,OATAC,qBAAU,WACN,IAAMC,EAAWF,EAAQG,QAAO,WAC5BC,OAAOC,SAAS,EAAG,MAEvB,OAAO,WACHH,OAEL,IAEI,QCHLI,EAAQC,gBAAK,kBAAM,iCACnBC,EAASD,gBAAK,kBAAM,wDACpBE,EAAYF,gBAAK,kBAAM,6EACvBG,EAAUH,gBAAK,kBAAM,6EACrBI,EAAcJ,gBAAK,kBAAM,uDACzBK,EAASL,gBAAK,kBAAM,8DACpBM,EAAWN,gBAAK,kBAAM,wDACtBO,EAAcP,gBAAK,kBAAM,wDACzBQ,EAAUR,gBAAK,kBAAM,kCACrBS,EAAWT,gBAAK,kBAAM,wDAmCbU,MAjCf,WAAgB,IACJhC,ECnBG,WAA4B,IAAD,EACdiC,mBAASC,KAAKC,MAAMC,aAAaC,QAAQ,cAD3B,mBAC/BrC,EAD+B,KACzBsC,EADyB,KAE9BnD,EAAaoD,qBAAWtD,KAAxBE,SAeR,OAdA6B,qBAAU,WACN,IAAMwB,EAAWrD,EAASsD,OAAOC,oBAAmB,SAACC,GAE7CA,GACAP,aAAaQ,QAAQ,WAAYV,KAAKW,UAAUF,IAChDL,EAAQK,KAGRP,aAAaU,WAAW,YACxBR,EAAQ,UAGhB,OAAO,kBAAME,OACd,CAACrD,IACG,CAAEa,QDEQ+C,GAAT/C,KAER,OACI,cAAC,IAAYgD,SAAb,CAAsBC,MAAO,CAAEjD,QAA/B,SACI,cAAC,IAAD,UACI,cAAC,WAAD,CAAUkD,SAAU,mBAAGC,UAAU,+CAAb,wBAApB,SACI,cAAC,EAAD,UACI,eAAC,IAAD,WACI,cAACzC,EAAD,CAAgBV,KAAMA,EAAMW,aAAcJ,IAAkB6C,KAAM7C,IAAlE,SACI,cAAC,IAAD,CAAO6C,KAAM7C,IAAc8C,UAAWhC,MAE1C,cAACX,EAAD,CAAgBV,KAAMA,EAAMW,aAAcJ,IAAkB6C,KAAM7C,IAAlE,SACI,cAAC,IAAD,CAAO6C,KAAM7C,IAAgB8C,UAAW9B,MAE5C,cAACxB,EAAD,CAAgBC,KAAMA,EAAMoD,KAAM7C,IAAkB+C,OAAK,EAAzD,SACI,cAAC9B,EAAD,MAEJ,cAAC,IAAD,CAAO4B,KAAM7C,IAAgB8C,UAAW5B,IACxC,cAAC,IAAD,CAAO2B,KAAM7C,IAAqB8C,UAAW3B,IAC7C,cAAC,IAAD,CAAO0B,KAAM7C,IAAe8C,UAAW1B,IACvC,cAAC,IAAD,CAAOyB,KAAM7C,IAAiB8C,UAAWzB,IACzC,cAAC,IAAD,CAAOwB,KAAM7C,IAAqB8C,UAAWxB,IAC7C,cAAC,IAAD,CAAOuB,KAAM7C,IAAgB8C,UAAWvB,IACxC,cAAC,IAAD,CAAOuB,UAAWtB,gB,QEtC9CwB,IAASpD,OACL,cAAC,IAAgB6C,SAAjB,CAA0BC,MAAO,CAAE9D,aAAUS,gBAA7C,SACI,cAAC,EAAD,MAEJ4D,SAASC,eAAe,W","file":"static/js/main.66d72aeb.chunk.js","sourcesContent":["export const DASHBOARD = '/';\nexport const LOGIN = '/login';\nexport const SIGN_UP = '/sign-up';\nexport const PROFILE = '/p/:username';\nexport const PROFILE_EDIT = '/edit/:username';\nexport const SEARCH = '/search';\nexport const MESSAGES = '/messages';\nexport const UPLOAD_IMAGE = '/upload';\nexport const WELCOME = '/welcome';\nexport const NOT_FOUND = '/not-found';\n","import { createContext } from 'react';\n\nconst FirebaseContext = createContext(null);\nexport default FirebaseContext;\n","import Firebase from 'firebase';\nimport 'firebase/firestore';\nimport 'firebase/auth';\n// import { seedDatabase } from '../seed';\n\nconst config = {\n    apiKey: 'AIzaSyDYOC4vSoKt8A2qLzIqw1A_BYTrqLAbFLk',\n    authDomain: 'artisto-rki.firebaseapp.com',\n    projectId: 'artisto-rki',\n    storageBucket: 'artisto-rki.appspot.com',\n    messagingSenderId: '960656414320',\n    appId: '1:960656414320:web:76f34788ac2ca4954d46b5',\n};\n\nconst firebase = Firebase.initializeApp(config);\nconst { FieldValue } = Firebase.firestore;\n\nexport { firebase, FieldValue };\n\n// seedDatabase(firebase);\n","import { createContext } from 'react';\n\nconst UserContext = createContext(null);\nexport default UserContext;\n","import PropTypes from 'prop-types';\nimport { Route, Redirect } from 'react-router-dom';\nimport * as ROUTES from '../constants/routes';\n\nexport default function ProtectedRoute({ user, children, ...rest }) {\n    // children = dashboard\n    return (\n        <Route\n            {...rest}\n            render={({ location }) => {\n                if (user) {\n                    return children;\n                }\n                if (!user) {\n                    return (\n                        <Redirect\n                            to={{\n                                pathname: ROUTES.LOGIN,\n                                state: { from: location },\n                            }}\n                        />\n                    );\n                }\n                return null;\n            }}\n        />\n    );\n}\n\nProtectedRoute.propTypes = {\n    user: PropTypes.object,\n    children: PropTypes.object.isRequired,\n};\n","import PropTypes from 'prop-types';\nimport { Route, Redirect } from 'react-router-dom';\n\nexport default function IsUserLoggedIn({ user, loggedInPath, children, ...rest }) {\n    // children = login / signin\n    console.log('rest', rest);\n    return (\n        <Route\n            {...rest}\n            render={({ location }) => {\n                if (!user) {\n                    return children;\n                }\n                if (user) {\n                    return (\n                        <Redirect\n                            to={{\n                                pathname: loggedInPath,\n                                state: { from: location },\n                            }}\n                        />\n                    );\n                }\n                return null;\n            }}\n        />\n    );\n}\n\nIsUserLoggedIn.propTypes = {\n    user: PropTypes.object,\n    loggedInPath: PropTypes.string.isRequired,\n    children: PropTypes.object.isRequired,\n};\n","import { useEffect } from 'react';\nimport { withRouter } from 'react-router-dom';\n\nfunction ScrollToTop({ history }) {\n    useEffect(() => {\n        const unlisten = history.listen(() => {\n            window.scrollTo(0, 0);\n        });\n        return () => {\n            unlisten();\n        };\n    }, []);\n\n    return null;\n}\n\nexport default withRouter(ScrollToTop);\n","import React, { lazy, Suspense } from 'react';\n// import { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\nimport { HashRouter as Router, Route, Switch } from 'react-router-dom';\nimport * as ROUTES from './constants/routes';\nimport UserContext from './context/user';\nimport useAuthListener from './hooks/useAuthListener';\nimport ProtectedRoute from './helpers/ProtectedRoute';\nimport IsUserLoggedIn from './helpers/isUserLoggedIn';\nimport ScrollToTop from './components/ScrollToTop';\n\nconst Login = lazy(() => import('./pages/Login'));\nconst SignUp = lazy(() => import('./pages/SignUp'));\nconst DashBoard = lazy(() => import('./pages/DashBoard'));\nconst Profile = lazy(() => import('./pages/Profile'));\nconst ProfileEdit = lazy(() => import('./pages/ProfileEdit'));\nconst Search = lazy(() => import('./pages/Search'));\nconst Messages = lazy(() => import('./pages/Messages'));\nconst UploadImage = lazy(() => import('./pages/UploadImage'));\nconst Welcome = lazy(() => import('./pages/Welcome'));\nconst NotFound = lazy(() => import('./pages/NotFound'));\n\nfunction App() {\n    const { user } = useAuthListener();\n\n    return (\n        <UserContext.Provider value={{ user }}>\n            <Router>\n                <Suspense fallback={<p className=\"text-gray-light text-center w-screen text-xl\">Loading...</p>}>\n                    <ScrollToTop>\n                        <Switch>\n                            <IsUserLoggedIn user={user} loggedInPath={ROUTES.DASHBOARD} path={ROUTES.LOGIN}>\n                                <Route path={ROUTES.LOGIN} component={Login} />\n                            </IsUserLoggedIn>\n                            <IsUserLoggedIn user={user} loggedInPath={ROUTES.DASHBOARD} path={ROUTES.SIGN_UP}>\n                                <Route path={ROUTES.SIGN_UP} component={SignUp} />\n                            </IsUserLoggedIn>\n                            <ProtectedRoute user={user} path={ROUTES.DASHBOARD} exact>\n                                <DashBoard />\n                            </ProtectedRoute>\n                            <Route path={ROUTES.PROFILE} component={Profile} />\n                            <Route path={ROUTES.PROFILE_EDIT} component={ProfileEdit} />\n                            <Route path={ROUTES.SEARCH} component={Search} />\n                            <Route path={ROUTES.MESSAGES} component={Messages} />\n                            <Route path={ROUTES.UPLOAD_IMAGE} component={UploadImage} />\n                            <Route path={ROUTES.WELCOME} component={Welcome} />\n                            <Route component={NotFound} />\n                        </Switch>\n                    </ScrollToTop>\n                </Suspense>\n            </Router>\n        </UserContext.Provider>\n    );\n}\n\nexport default App;\n","import { useState, useEffect, useContext } from 'react';\nimport FirebaseContext from '../context/firebase';\n\nexport default function useAuthListener() {\n    const [user, setUser] = useState(JSON.parse(localStorage.getItem('authUser')));\n    const { firebase } = useContext(FirebaseContext);\n    useEffect(() => {\n        const listener = firebase.auth().onAuthStateChanged((authUser) => {\n            // we have a user... therefore we can store the user in localstorage\n            if (authUser) {\n                localStorage.setItem('authUser', JSON.stringify(authUser));\n                setUser(authUser);\n            } else {\n                // we don't have an authUser, therefore clear the localstorage\n                localStorage.removeItem('authUser');\n                setUser(null);\n            }\n        });\n        return () => listener();\n    }, [firebase]);\n    return { user };\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport FirebaseContext from './context/firebase';\nimport { firebase, FieldValue } from './lib/firebase';\n\nReactDOM.render(\n    <FirebaseContext.Provider value={{ firebase, FieldValue }}>\n        <App />\n    </FirebaseContext.Provider>,\n    document.getElementById('root')\n);\n"],"sourceRoot":""}