(this.webpackJsonpartisto=this.webpackJsonpartisto||[]).push([[13],{103:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return m}));var n=r(56),a=r.n(n),c=r(57),s=r(30),u=r(3),o=r(20),i=r(8),l=r(19),p=r(11),d=r(59),f=r(64),b=r(55),h=r(5);function m(){var e=Object(u.useContext)(o.a).firebase,t=Object(u.useState)(""),r=Object(s.a)(t,2),n=r[0],m=r[1],j=Object(u.useState)(""),x=Object(s.a)(j,2),v=x[0],O=x[1],g=Object(u.useState)(""),w=Object(s.a)(g,2),y=w[0],k=w[1],N=Object(u.useState)(""),I=Object(s.a)(N,2),C=I[0],S=I[1],L=Object(u.useState)(""),P=Object(s.a)(L,2),D=P[0],_=P[1],U=Object(u.useState)(""),A=Object(s.a)(U,2),E=A[0],F=A[1],J=""===y||""===v||""===n||""===C||""===D,R=Object(i.g)();Object(u.useEffect)((function(){document.title="Sign In - Artisto"}),[]);var T=function(){var t=Object(c.a)(a.a.mark((function t(r){var c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),t.next=3,Object(b.b)(n);case 3:if(t.sent){t.next=21;break}return t.prev=5,t.next=8,e.auth().createUserWithEmailAndPassword(v,y);case 8:return c=t.sent,t.next=11,c.user.updateProfile({displayName:n.toLowerCase()});case 11:return t.next=13,e.firestore().collection("users").add({userId:c.user.uid,username:n.toLowerCase(),fullName:C,email:v.toLowerCase(),category:D,title:"",bio:"",followers:[],following:[],photo:"",dateCreated:Date.now()});case 13:R.push(p.a),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(5),F(t.t0.message);case 19:t.next=23;break;case 21:m(""),F("That username is already taken, please try another.");case 23:case"end":return t.stop()}}),t,null,[[5,16]])})));return function(e){return t.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"flex justify-center container max-w-screen-md items-center h-screen mx-auto",children:[Object(h.jsx)("div",{className:"w-1/2",children:Object(h.jsx)("h1",{className:"w-full flex items-center justify-end",children:Object(h.jsx)("img",{src:d.a,alt:"artisto",className:""})})}),Object(h.jsx)("div",{className:"w-1/2",children:Object(h.jsxs)("div",{className:"bg-gray-dark rounded",children:[Object(h.jsxs)("div",{className:"p-8",children:[E&&Object(h.jsx)("p",{className:"text-xs text-red-primary",children:E}),Object(h.jsxs)("form",{className:"flex flex-col",onSubmit:T,children:[Object(h.jsx)("input",{placeholder:"Username",type:"text",onChange:function(e){var t=e.target;return m(t.value)},value:n,className:"bg-gray-light w-full p-1 h-10 text-sm mb-5"}),Object(h.jsx)("input",{placeholder:"Full Name",type:"text",onChange:function(e){var t=e.target;return S(t.value)},value:C,className:"bg-gray-light w-full p-1 h-10 text-sm mb-5"}),Object(h.jsxs)("select",{className:"bg-gray-light w-full py-1 h-10 text-sm text-gray-dark mb-5",onChange:function(e){var t=e.target;return _(t.value)},value:D,children:[Object(h.jsx)("option",{hidden:!0,value:"",children:"Category"}),f.a.sort().map((function(e,t){return Object(h.jsx)("option",{value:e,children:e},t)})),Object(h.jsx)("option",{value:"others",children:"Others"})]}),Object(h.jsx)("input",{placeholder:"Email Address",type:"text",onChange:function(e){var t=e.target;return O(t.value)},value:v,className:"bg-gray-light w-full p-1 h-10 text-sm mb-5"}),Object(h.jsx)("input",{placeholder:"Password",type:"password",onChange:function(e){var t=e.target;return k(t.value)},value:y,className:"bg-gray-light w-full p-1 h-10 text-sm"}),Object(h.jsx)("button",{className:"bg-yellow-primary text-gray-dark mt-12 w-full p-1 h-10 rounded ".concat(J&&"opacity-50"),type:"submit",disabled:J,children:"Sign Up"})]})]}),Object(h.jsx)("div",{className:"flex flex-col justify-center items-center",children:Object(h.jsxs)("p",{className:"text-gray-light text-xs mb-12 mt-8",children:["You already have an account?"," ",Object(h.jsx)(l.b,{to:p.b,className:"text-yellow-primary",children:"Login"})]})})]})})]})}},55:function(e,t,r){"use strict";r.d(t,"b",(function(){return f})),r.d(t,"h",(function(){return h})),r.d(t,"i",(function(){return j})),r.d(t,"a",(function(){return v})),r.d(t,"d",(function(){return g})),r.d(t,"f",(function(){return y})),r.d(t,"e",(function(){return N})),r.d(t,"j",(function(){return D})),r.d(t,"c",(function(){return U})),r.d(t,"g",(function(){return E})),r.d(t,"k",(function(){return J})),r.d(t,"l",(function(){return T}));var n=r(30),a=r(17),c=r(56),s=r.n(c),u=r(57),o=r(23),i=r(62),l=r.n(i),p="".concat("dvhwserkv"),d="".concat("s4onxndn");function f(e){return b.apply(this,arguments)}function b(){return(b=Object(u.a)(s.a.mark((function e(t){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.firestore().collection("users").where("username","==",t).get();case 2:return r=e.sent,console.log(r.docs.length>0),e.abrupt("return",r.docs.length>0);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return m.apply(this,arguments)}function m(){return(m=Object(u.a)(s.a.mark((function e(t){var r,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.firestore().collection("users").where("userId","==",t).get();case 2:return r=e.sent,n=r.docs.map((function(e){return Object(a.a)(Object(a.a)({},e.data()),{},{docId:e.id})})),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e){return x.apply(this,arguments)}function x(){return(x=Object(u.a)(s.a.mark((function e(t){var r,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.firestore().collection("users").where("username","==",t).get();case 2:return r=e.sent,n=r.docs.map((function(e){return Object(a.a)(Object(a.a)({},e.data()),{},{docId:e.id})})),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e,t){return O.apply(this,arguments)}function O(){return(O=Object(u.a)(s.a.mark((function e(t,r){var c,u,i,l,p;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.firestore().collection("users").where("username","==",t).where("following","array-contains",r).get();case 2:return c=e.sent,u=c.docs.map((function(e){return Object(a.a)(Object(a.a)({},e.data()),{},{docId:e.id})})),i=Object(n.a)(u,1),l=i[0],p=void 0===l?{}:l,e.abrupt("return",p.userId);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e,t){return w.apply(this,arguments)}function w(){return(w=Object(u.a)(s.a.mark((function e(t,r){var c,i,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.firestore().collection("photos").where("userId","in",t).get();case 2:return c=e.sent,i=c.docs.map((function(e){return Object(a.a)(Object(a.a)({},e.data()),{},{docId:e.id})})),e.next=6,Promise.all(i.map(function(){var e=Object(u.a)(s.a.mark((function e(t){var c,u,o,i,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=!1,t.likes.includes(r)&&(c=!0),e.next=4,h(t.userId);case 4:return u=e.sent,o=Object(n.a)(u,1),i=o[0],l=i.username,e.abrupt("return",Object(a.a)(Object(a.a)({username:l},t),{},{userLikedPhoto:c}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:return l=e.sent,e.abrupt("return",l);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return k.apply(this,arguments)}function k(){return(k=Object(u.a)(s.a.mark((function e(t){var r,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.firestore().collection("photos").where("userId","==",t).get();case 2:return r=e.sent,n=r.docs.map((function(e){return Object(a.a)(Object(a.a)({},e.data()),{},{docId:e.id})})),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e,t,r){return I.apply(this,arguments)}function I(){return(I=Object(u.a)(s.a.mark((function e(t,r,c){var u,i,l,p,d;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.firestore().collection("photos").where("photoId","==",t).get();case 2:return u=e.sent,e.next=5,u.docs.map((function(e){return Object(a.a)(Object(a.a)({},e.data()),{},{docId:e.id})}));case 5:return i=e.sent,l=Object(n.a)(i,1),p=l[0],console.log(p),d=!1,p.likes.includes(r)&&(d=!0),e.abrupt("return",Object(a.a)(Object(a.a)({},p),{},{userLikedPhoto:d,username:c}));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e,t,r){return S.apply(this,arguments)}function S(){return(S=Object(u.a)(s.a.mark((function e(t,r,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o.b.firestore().collection("users").doc(t).update({following:n?o.a.arrayRemove(r):o.a.arrayUnion(r)});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e,t,r){return P.apply(this,arguments)}function P(){return(P=Object(u.a)(s.a.mark((function e(t,r,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o.b.firestore().collection("users").doc(t).update({followers:n?o.a.arrayRemove(r):o.a.arrayUnion(r)});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e,t,r,n,a){return _.apply(this,arguments)}function _(){return(_=Object(u.a)(s.a.mark((function e(t,r,n,a,c){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(t,a,c);case 2:return e.next=4,L(n,r,c);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){return A.apply(this,arguments)}function A(){return(A=Object(u.a)(s.a.mark((function e(t){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(function(){var e=Object(u.a)(s.a.mark((function e(t){var r,a,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(t);case 2:return r=e.sent,a=Object(n.a)(r,1),c=a[0],console.log("userList",c),e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return r=e.sent,console.log("result",r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){return F.apply(this,arguments)}function F(){return(F=Object(u.a)(s.a.mark((function e(t){var r,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.firestore().collection("users").where("category","==",t).get();case 2:return r=e.sent,n=r.docs.map((function(e){return Object(a.a)(Object(a.a)({},e.data()),{},{docId:e.id})})),console.log(n),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e,t,r,n,a,c){return R.apply(this,arguments)}function R(){return(R=Object(u.a)(s.a.mark((function e(t,r,n,a,c,u){var i,f;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u){e.next=10;break}return i="",(f=new FormData).append("file",u[0]),f.append("upload_preset",d),e.next=7,l.a.post("https://api.cloudinary.com/v1_1/".concat(p,"/image/upload"),f).then((function(e){var t=e.data;i=t.secure_url,console.log("url",i)}));case 7:o.b.firestore().collection("users").doc(t).update({fullName:r,category:n,title:a,bio:c,photo:i}),e.next=11;break;case 10:o.b.firestore().collection("users").doc(t).update({fullName:r,category:n,title:a,bio:c});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e,t,r){return W.apply(this,arguments)}function W(){return(W=Object(u.a)(s.a.mark((function e(t,r,n){var a,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="",(c=new FormData).append("file",r[0]),c.append("upload_preset",d),e.next=6,l.a.post("https://api.cloudinary.com/v1_1/".concat(p,"/image/upload"),c).then((function(e){var t=e.data;a=t.secure_url,console.log("url",a)}));case 6:return e.next=8,o.b.firestore().collection("photos").add({caption:t,comments:[],dateCreated:Date.now(),imageSrc:a,likes:[],photoId:n+Date.now(),userId:n,userLatitude:34.0522,userLongitude:-188.2437});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},59:function(e,t,r){"use strict";t.a=r.p+"static/media/logo.6dc95425.png"},64:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n=["web design","video game","animation","graphic design","painting","illustration"]}}]);
//# sourceMappingURL=13.c2b59ef9.chunk.js.map