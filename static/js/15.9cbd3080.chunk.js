(this.webpackJsonpartisto=this.webpackJsonpartisto||[]).push([[15],{109:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return F}));var n=r(56),c=r.n(n),s=r(57),o=r(30),a=r(3),l=r(8),i=r(61),u=r(55),j=r(58),d=r(11),b=r(19),f=r(5);function p(e){var t=e.username,r=e.fullName,n=e.photo,c=e.setFollowingOrFollowers;return Object(f.jsxs)("div",{className:"p-2 flex mx-auto items-center",children:[Object(f.jsx)(b.b,{to:"/p/".concat(t),onClick:function(){return c()},children:Object(f.jsx)("div",{children:Object(f.jsx)("img",{src:n,className:"h-10 w-10 rounded-full object-cover"})})}),Object(f.jsxs)("div",{className:"pl-4",children:[Object(f.jsx)(b.b,{to:"/p/".concat(t),onClick:function(){return c()},children:Object(f.jsx)("p",{className:"font-bold",children:r})}),Object(f.jsxs)("p",{className:"text-sm",children:[Object(f.jsx)("span",{className:"text-xs",children:"ID: "}),t]})]})]})}var h=r(63),m=r.n(h);function x(e){var t=e.following,r=e.followers,n=e.followingOrFollowers,l=e.setFollowingOrFollowers,i=Object(a.useState)([]),j=Object(o.a)(i,2),d=j[0],b=j[1];return Object(a.useEffect)((function(){var e=function(){var e=Object(s.a)(c.a.mark((function e(){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.c)(t);case 2:r=e.sent,b(r);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o=function(){var e=Object(s.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.c)(r);case 2:t=e.sent,b(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();"following"===n&&e(),"followers"===n&&o()}),[n]),console.log("list",d),Object(f.jsx)("div",{className:"bg-gray-light h-3/4 max-w-sm w-96 rounded text-gray-dark p-8",children:d?d.map((function(e,t){return Object(f.jsx)(p,{username:e.username,fullName:e.fullName,photo:e.photo,setFollowingOrFollowers:l},t)})):Object(f.jsx)(m.a,{count:4,className:"w-full pb-4 h-1/4"})})}function O(e){var t=e.profileUserInfo,r=(e.photos,e.photoCounts),n=Object(j.a)().userInfo,i=n.username,d=n.docId,b=n.userId,p=Object(a.useState)(null),h=Object(o.a)(p,2),m=h[0],O=h[1],g=Object(a.useState)(t.followers.length),v=Object(o.a)(g,2),w=v[0],N=v[1],y=Object(a.useState)(null),k=Object(o.a)(y,2),I=k[0],F=k[1],C=Object(l.g)();Object(a.useEffect)((function(){t&&i&&function(){var e=Object(s.a)(c.a.mark((function e(){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.a)(i,t.userId);case 2:r=e.sent,O(!!r);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[t,i]);var S=function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O((function(e){return!e})),N(m?function(e){return e-1}:function(e){return e+1}),e.next=4,Object(u.j)(d,b,t.docId,t.userId,m);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{className:"pt-24 text-gray-light",children:[I&&Object(f.jsx)("div",{onClick:function(e){!function(e){e.target===e.currentTarget&&F(null)}(e)},className:"flex justify-center w-screen h-screen pt-20 bg-gray-primary bg-opacity-50 absolute top-0 left-0 z-90",children:Object(f.jsx)("div",{className:"",children:Object(f.jsx)(x,{following:t.following,followers:t.followers,followingOrFollowers:I,setFollowingOrFollowers:F})})}),Object(f.jsxs)("div",{className:"flex items-center ",children:[Object(f.jsx)("div",{className:"pr-4",children:Object(f.jsx)("img",{src:t.photo,alt:"".concat(t.username," profile photo"),className:"w-36 h-36 rounded-full object-cover"})}),Object(f.jsxs)("div",{className:"w-1/2",children:[Object(f.jsxs)("div",{className:"flex items-center",children:[Object(f.jsxs)("div",{children:[Object(f.jsx)("p",{className:"text-lg font-bold",children:t.fullName}),Object(f.jsxs)("p",{children:[Object(f.jsx)("span",{className:"text-sm",children:"ID: "}),t.username]})]}),Object(f.jsx)("div",{className:"ml-10",children:t.username===i?Object(f.jsx)("button",{className:"text-xs bg-gray-dark text-gray-light p-2 rounded",onClick:function(){return C.push("/edit/".concat(i))},children:"Edit Profile"}):null})]}),Object(f.jsxs)("p",{className:"",children:[Object(f.jsx)("span",{className:"text-sm",children:"Category: "}),t.category]}),Object(f.jsxs)("div",{className:"flex mt-4",children:[Object(f.jsxs)("p",{children:[r," ",Object(f.jsx)("span",{className:"text-sm",children:1===r?"post":"posts"})]}),Object(f.jsxs)("p",{className:"px-4 cursor-pointer",onClick:function(){return F(t.followers.length>0&&"followers")},children:[w," ",Object(f.jsx)("span",{className:"text-sm",children:1===t.followers.length?"follower":"followers"})]}),Object(f.jsxs)("p",{className:"cursor-pointer",onClick:function(){return F(t.following.length>0&&"following")},children:[t.following.length," ",Object(f.jsx)("span",{className:"text-sm",children:"following"})]})]})]}),Object(f.jsx)("div",{children:t.username===i||null===m?null:Object(f.jsx)("button",{onClick:S,className:"rounded text-gray-light bg-red-primary text-sm py-2 px-6 ".concat(m?"bg-red-primary":"bg-blue-primary"),children:m?"Unfollow":"Follow"})})]}),Object(f.jsxs)("div",{className:"pt-2 max-w-2xl",children:[Object(f.jsx)("p",{className:"",children:t.title}),Object(f.jsx)("p",{className:"text-sm",children:"Bio:"}),Object(f.jsx)("p",{className:"break-words text-sm",children:t.bio})]})]})}var g=r(75),v=r(76),w=r(79);function N(e){var t=e.photo,r=e.profileUsername,n=Object(a.useState)(null),l=Object(o.a)(n,2),i=l[0],d=l[1],b=Object(j.a)().userInfo.userId;return Object(a.useEffect)((function(){b&&t&&function(){var e=Object(s.a)(c.a.mark((function e(){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.e)(t.photoId,b,r);case 2:n=e.sent,d(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[b,t]),console.log("photo",t),console.log("photoWithDetails",i),(null===i||void 0===i?void 0:i.username)?Object(f.jsxs)("div",{className:"bg-gray-light py-8 px-16 mb-8",children:[Object(f.jsx)(g.a,{userId:i.userId,username:i.username,caption:i.caption,date:i.dateCreated}),Object(f.jsx)(v.a,{imageSrc:i.imageSrc}),Object(f.jsx)(w.a,{likes:i.likes,userLikedPhoto:i.userLikedPhoto,comments:i.comments,docId:i.docId})]}):Object(f.jsx)(h.SkeletonTheme,{color:"#494848",highlightColor:"#F1F1F1",children:Object(f.jsx)(m.a,{count:1,width:600,height:600})})}function y(e){var t=e.photo,r=e.profileUserInfo,n=Object(a.useState)(!1),c=Object(o.a)(n,2),s=c[0],l=c[1],i=function(){l((function(e){return!e}))};return t?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("img",{src:t.imageSrc,alt:t.caption,className:"object-cover cursor-pointer",style:{width:"100%",aspectRatio:"1"},onClick:i}),s&&Object(f.jsx)("div",{onClick:function(e){!function(e){e.target===e.currentTarget&&i()}(e)},className:"flex justify-center w-screen pt-20 bg-gray-primary bg-opacity-50 absolute top-0 left-0 z-90",children:Object(f.jsx)("div",{className:"w-full max-w-screen-sm pb-8",children:Object(f.jsx)(N,{photo:t,profileUsername:r.username})})})]}):null}function k(e){var t=e.profileUserInfo,r=e.photos;return Object(f.jsx)("div",{className:"border-t-2 border-gray-dark my-8 pt-8",children:Object(f.jsx)("div",{className:"grid grid-cols-3 gap-8 items-center",children:r.map((function(e,r){return Object(f.jsx)(y,{photo:e,profileUserInfo:t},r)}))})})}function I(e){var t=e.profileUserInfo,r=Object(a.useState)(null),n=Object(o.a)(r,2),l=n[0],i=n[1],j=Object(a.useState)(0),d=Object(o.a)(j,2),b=d[0],p=d[1];return Object(a.useEffect)((function(){var e=function(){var e=Object(s.a)(c.a.mark((function e(){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.f)(t.userId);case 2:r=e.sent,i(r),p(r.length);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(null===t||void 0===t?void 0:t.userId)&&e()}),[null===t||void 0===t?void 0:t.userId]),Object(f.jsxs)("div",{className:"max-w-screen-lg container mx-auto px-4",children:[Object(f.jsx)(O,{profileUserInfo:t,photos:l,photoCounts:b}),l?Object(f.jsx)(k,{profileUserInfo:t,photos:l}):Object(f.jsx)("div",{className:"mt-8 border-t-2 border-gray-dark",children:Object(f.jsx)("p",{className:"text-gray-light text-center pt-8",children:"No Photos"})})]})}function F(){var e=Object(l.h)().username,t=Object(a.useState)(null),r=Object(o.a)(t,2),n=r[0],j=r[1],b=Object(l.g)();return Object(a.useEffect)((function(){e&&function(){var t=Object(s.a)(c.a.mark((function t(){var r,n,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(u.i)(e);case 2:r=t.sent,n=Object(o.a)(r,1),s=n[0],j(s),s||b.push(d.d);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[e]),(null===n||void 0===n?void 0:n.username)?Object(f.jsxs)("div",{children:[Object(f.jsx)(i.a,{}),Object(f.jsx)(I,{profileUserInfo:n})]}):Object(f.jsx)(h.SkeletonTheme,{color:"#494848",highlightColor:"#F1F1F1",children:Object(f.jsx)("div",{className:"max-w-screen-lg h-screen mx-auto",children:Object(f.jsx)(m.a,{count:1,height:200,className:"mt-20 mx-4"})})})}}}]);
//# sourceMappingURL=15.9cbd3080.chunk.js.map